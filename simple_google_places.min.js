!function(a){a.simpleGooglePlaces=function(b,c){var d={endpoint:"./example/data.json",place_type:"Store",render:"is_open",close_in:60,open_in:60,class:{place:"sgp-place",time:"sgp-time",day:"sgp-day"},strings:{open:{label:'<span class="@class_place">@place</span> will open at <span class="@class_time">@time</span> on <span class="@class_day">@day</span>.',label_this_day:'<span class="@class_place">@place</span> will open at <span class="@class_time">@time</span>.',time:"@h:@m"},close:{label:'<span class="@class_place">@place</span> will close at <span class="@class_time">@time</span>.',label_in:'<span class="@class_place">@place</span> will close in <span class="@class_time">@time</span> minutes.',label_other_day:'<span class="@class_place">@place</span> will close at <span class="@class_time">@time</span> on <span class="@class_day">@day</span>.'}}},e=this;e.settings={};var f=a(b),g={is_open:!1,close:{day:null,time:null},open:{day:null,time:null}},h=new Array(7);h[0]="sunday",h[1]="monday",h[2]="tuesday",h[3]="wednesday",h[4]="thursday",h[5]="friday",h[6]="saturday";var i=new Date,j=i.getDay(),k=("0"+i.getHours()).slice(-2)+("0"+i.getMinutes()).slice(-2);e.init=function(){e.settings=a.extend({},d,c),console.log(e.setting),e.settings.schema=a.extend({},d.schema,c.schema);a.getJSON("./sites/all/libraries/simple_google_places/example/data.json",function(a){"is_open"==e.settings.render&&l(a)})};var l=function(a){if("result"in a&&"opening_hours"in a.result){if("periods"in a.result.opening_hours){for(var b in a.result.opening_hours.periods)a.result.opening_hours.periods[b].open.day<=j&&(a.result.opening_hours.periods[b].close.day==j&&a.result.opening_hours.periods[b].close.time>=k||a.result.opening_hours.periods[b].close.day!=j)&&(g.is_open=!0,g.close=a.result.opening_hours.periods[b].close,f.attr("data-close",g.close.time),f.attr("data-close-day",g.close.day)),a.result.opening_hours.periods[b].open.day>j&&null==g.open.day&&(g.open=a.result.opening_hours.periods[b].open);null==g.open.day&&(g.open=a.result.opening_hours.periods[0].open),null==g.close.day&&(g.close=a.result.opening_hours.periods[0].close)}var c="";if(g.is_open){var d=o(g.close.time,k,g.close.day,j);c=d<e.settings.close_in?n(d):m(g.close.day,g.close.time)}else if(!g.is_open){var i=e.settings.strings.open.label;g.open.day==j&&(i=e.settings.strings.open.label_this_day),c=Drupal.t(i,{"@class_place":e.settings.class.place,"@class_time":e.settings.class.time,"@class_day":e.settings.class.day,"@place":e.settings.place_type,"@time":p(g.open.time),"@day":h[g.open.day]})}f.html(c)}},m=function(a,b){return a!=j?Drupal.t(e.settings.strings.close.label_other_day,{"@class_place":e.settings.class.place,"@class_time":e.settings.class.time,"@class_day":e.settings.class.day,"@place":e.settings.place_type,"@time":p(b),"@day":h[a]}):Drupal.t(e.settings.strings.close.label,{"@class_place":e.settings.class.place,"@class_time":e.settings.class.time,"@place":e.settings.place_type,"@time":p(b)})},n=function(a){return Drupal.t(e.settings.strings.close.label_in,{"@class_place":e.settings.class.place,"@class_time":e.settings.class.time,"@place":e.settings.place_type,"@time":a})},o=function(a,b,c,d){var e=0;if(c!=d)for(;c!=d;)e+=1440,c+=1,7==c&&(c=0);return e+(+(60*a.substr(0,2))+ +a.substr(2,2))-(+(60*b.substr(0,2))+ +b.substr(2,2))},p=function(a){return Drupal.t(e.settings.strings.open.time,{"@h":a.substr(0,2),"@m":a.substr(2,2)})};e.init()},a.fn.simpleGooglePlaces=function(b){return console.log("test"),this.each(function(){if(void 0==a(this).data("simpleGooglePlaces")){var c=new a.simpleGooglePlaces(this,b);a(this).data("simpleGooglePlaces",c)}})}}(jQuery);